(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-55437c5f"],{"16b7":function(t,e,n){"use strict";n("a9e3");var i=n("2b0e");e["a"]=i["default"].extend().extend({name:"delayable",props:{openDelay:{type:[Number,String],default:0},closeDelay:{type:[Number,String],default:0}},data:function(){return{openTimeout:void 0,closeTimeout:void 0}},methods:{clearDelay:function(){clearTimeout(this.openTimeout),clearTimeout(this.closeTimeout)},runDelay:function(t,e){var n=this;this.clearDelay();var i=parseInt(this["".concat(t,"Delay")],10);this["".concat(t,"Timeout")]=setTimeout(e||function(){n.isActive={open:!0,close:!1}[t]},i)}}})},"21be":function(t,e,n){"use strict";var i=n("2909"),a=(n("99af"),n("caad"),n("2532"),n("2b0e")),o=n("80d2");e["a"]=a["default"].extend().extend({name:"stackable",data:function(){return{stackElement:null,stackExclude:null,stackMinZIndex:0,isActive:!1}},computed:{activeZIndex:function(){if("undefined"===typeof window)return 0;var t=this.stackElement||this.$refs.content,e=this.isActive?this.getMaxZIndex(this.stackExclude||[t])+2:Object(o["p"])(t);return null==e?e:parseInt(e)}},methods:{getMaxZIndex:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=this.$el,n=[this.stackMinZIndex,Object(o["p"])(e)],a=[].concat(Object(i["a"])(document.getElementsByClassName("v-menu__content--active")),Object(i["a"])(document.getElementsByClassName("v-dialog__content--active"))),r=0;r<a.length;r++)t.includes(a[r])||n.push(Object(o["p"])(a[r]));return Math.max.apply(Math,n)}}})},"368e":function(t,e,n){},"480e":function(t,e,n){"use strict";n("7db0");var i=n("7560");e["a"]=i["a"].extend({name:"v-theme-provider",props:{root:Boolean},computed:{isDark:function(){return this.root?this.rootIsDark:i["a"].options.computed.isDark.call(this)}},render:function(){return this.$slots.default&&this.$slots.default.find((function(t){return!t.isComment&&" "!==t.text}))}})},"4ad4":function(t,e,n){"use strict";var i=n("53ca"),a=(n("caad"),n("b64b"),n("b0c0"),n("16b7")),o=n("f2e7"),r=n("58df"),s=n("80d2"),c=n("d9bd"),l=Object(r["a"])(a["a"],o["a"]);e["a"]=l.extend({name:"activatable",props:{activator:{default:null,validator:function(t){return["string","object"].includes(Object(i["a"])(t))}},disabled:Boolean,internalActivator:Boolean,openOnHover:Boolean,openOnFocus:Boolean},data:function(){return{activatorElement:null,activatorNode:[],events:["click","mouseenter","mouseleave","focus"],listeners:{}}},watch:{activator:"resetActivator",openOnFocus:"resetActivator",openOnHover:"resetActivator"},mounted:function(){var t=Object(s["o"])(this,"activator",!0);t&&["v-slot","normal"].includes(t)&&Object(c["b"])('The activator slot must be bound, try \'<template v-slot:activator="{ on }"><v-btn v-on="on">\'',this),this.addActivatorEvents()},beforeDestroy:function(){this.removeActivatorEvents()},methods:{addActivatorEvents:function(){if(this.activator&&!this.disabled&&this.getActivator()){this.listeners=this.genActivatorListeners();for(var t=Object.keys(this.listeners),e=0,n=t;e<n.length;e++){var i=n[e];this.getActivator().addEventListener(i,this.listeners[i])}}},genActivator:function(){var t=Object(s["n"])(this,"activator",Object.assign(this.getValueProxy(),{on:this.genActivatorListeners(),attrs:this.genActivatorAttributes()}))||[];return this.activatorNode=t,t},genActivatorAttributes:function(){return{role:"button","aria-haspopup":!0,"aria-expanded":String(this.isActive)}},genActivatorListeners:function(){var t=this;if(this.disabled)return{};var e={};return this.openOnHover?(e.mouseenter=function(e){t.getActivator(e),t.runDelay("open")},e.mouseleave=function(e){t.getActivator(e),t.runDelay("close")}):e.click=function(e){var n=t.getActivator(e);n&&n.focus(),e.stopPropagation(),t.isActive=!t.isActive},this.openOnFocus&&(e.focus=function(e){t.getActivator(e),e.stopPropagation(),t.isActive=!t.isActive}),e},getActivator:function(t){if(this.activatorElement)return this.activatorElement;var e=null;if(this.activator){var n=this.internalActivator?this.$el:document;e="string"===typeof this.activator?n.querySelector(this.activator):this.activator.$el?this.activator.$el:this.activator}else if(1===this.activatorNode.length||this.activatorNode.length&&!t){var i=this.activatorNode[0].componentInstance;e=i&&i.$options.mixins&&i.$options.mixins.some((function(t){return t.options&&["activatable","menuable"].includes(t.options.name)}))?i.getActivator():this.activatorNode[0].elm}else t&&(e=t.currentTarget||t.target);return this.activatorElement=e,this.activatorElement},getContentSlot:function(){return Object(s["n"])(this,"default",this.getValueProxy(),!0)},getValueProxy:function(){var t=this;return{get value(){return t.isActive},set value(e){t.isActive=e}}},removeActivatorEvents:function(){if(this.activator&&this.activatorElement){for(var t=Object.keys(this.listeners),e=0,n=t;e<n.length;e++){var i=n[e];this.activatorElement.removeEventListener(i,this.listeners[i])}this.listeners={}}},resetActivator:function(){this.removeActivatorEvents(),this.activatorElement=null,this.getActivator(),this.addActivatorEvents()}}})},"75eb":function(t,e,n){"use strict";var i=n("ade3"),a=n("53ca"),o=(n("159b"),n("9d65")),r=n("80d2"),s=n("58df"),c=n("d9bd");function l(t){var e=Object(a["a"])(t);return"boolean"===e||"string"===e||t.nodeType===Node.ELEMENT_NODE}e["a"]=Object(s["a"])(o["a"]).extend({name:"detachable",props:{attach:{default:!1,validator:l},contentClass:{type:String,default:""}},data:function(){return{activatorNode:null,hasDetached:!1}},watch:{attach:function(){this.hasDetached=!1,this.initDetach()},hasContent:function(){this.$nextTick(this.initDetach)}},beforeMount:function(){var t=this;this.$nextTick((function(){if(t.activatorNode){var e=Array.isArray(t.activatorNode)?t.activatorNode:[t.activatorNode];e.forEach((function(e){if(e.elm&&t.$el.parentNode){var n=t.$el===t.$el.parentNode.firstChild?t.$el:t.$el.nextSibling;t.$el.parentNode.insertBefore(e.elm,n)}}))}}))},mounted:function(){this.hasContent&&this.initDetach()},deactivated:function(){this.isActive=!1},beforeDestroy:function(){try{if(this.$refs.content&&this.$refs.content.parentNode&&this.$refs.content.parentNode.removeChild(this.$refs.content),this.activatorNode){var t=Array.isArray(this.activatorNode)?this.activatorNode:[this.activatorNode];t.forEach((function(t){t.elm&&t.elm.parentNode&&t.elm.parentNode.removeChild(t.elm)}))}}catch(e){console.log(e)}},methods:{getScopeIdAttrs:function(){var t=Object(r["l"])(this.$vnode,"context.$options._scopeId");return t&&Object(i["a"])({},t,"")},initDetach:function(){var t;this._isDestroyed||!this.$refs.content||this.hasDetached||""===this.attach||!0===this.attach||"attach"===this.attach||(t=!1===this.attach?document.querySelector("[data-app]"):"string"===typeof this.attach?document.querySelector(this.attach):this.attach,t?(t.appendChild(this.$refs.content),this.hasDetached=!0):Object(c["c"])("Unable to locate target ".concat(this.attach||"[data-app]"),this))}}})},"99d9":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return c}));var i=n("b0af"),a=n("80d2"),o=Object(a["g"])("v-card__actions"),r=Object(a["g"])("v-card__subtitle"),s=Object(a["g"])("v-card__text"),c=Object(a["g"])("v-card__title");i["a"]},e498:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-row",[n("v-col",{attrs:{cols:2}},[n("v-form",{model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-text-field",{attrs:{label:"查询字段"},model:{value:t.defaultField,callback:function(e){t.defaultField=e},expression:"defaultField"}}),n("v-text-field",{attrs:{label:"查询内容"},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}}),n("v-text-field",{attrs:{label:"排序"},model:{value:t.sort,callback:function(e){t.sort=e},expression:"sort"}}),n("v-row",[n("v-col",[n("v-text-field",{attrs:{label:"start"},model:{value:t.start,callback:function(e){t.start=e},expression:"start"}})],1),n("v-col",[n("v-text-field",{attrs:{label:"rows"},model:{value:t.rows,callback:function(e){t.rows=e},expression:"rows"}})],1)],1),n("v-col",[n("v-btn",{staticClass:"mr-4",attrs:{color:"primary"},on:{click:function(e){return t.submit(t.start)}}},[t._v(" Execute Query ")])],1),n("v-col",[n("v-btn",{staticClass:"mr-4",attrs:{color:"primary"},on:{click:function(e){return t.check()}}},[t._v(" check ")])],1)],1)],1),n("v-col",{attrs:{cols:10}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",attrs:{data:t.articles.slice((t.currentPage-1)*t.pageSize,t.currentPage*t.pageSize)},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),t._l(t.headers,(function(t){return n("el-table-column",{key:t.label,attrs:{prop:t.prop,label:t.label,"show-overflow-tooltip":!0}})})),n("el-table-column",{attrs:{label:"选项"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return t.deleteOneDialogShow(e.$index,e.row)}}},[t._v("删除")])]}}])})],2),0!==t.articles.length?n("v-row",{staticStyle:{"margin-top":"20px"},attrs:{justify:"center"}},[n("v-col",[n("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.deleteSelected()}}},[t._v("删除选中")])],1),n("v-col",[n("el-pagination",{attrs:{align:"center","current-page":t.currentPage,"page-size":10,layout:"total, prev, pager, next, jumper",total:t.returnNumber},on:{"current-change":t.handleCurrentChange}})],1)],1):t._e()],1)],1),n("v-row",{attrs:{justify:"center"}},[n("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:t.deleteOneDialog,callback:function(e){t.deleteOneDialog=e},expression:"deleteOneDialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[t._v(" 删除确认 ")]),n("v-card-text",[t._v("您确认要删除_id为"+t._s(t.deleteOne.row._id)+"的文章吗？")]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){t.deleteOneDialog=!1}}},[t._v(" 取消 ")]),n("v-btn",{attrs:{color:"red",text:""},on:{click:function(e){t.deleteOneDialog=!1,t.deleteARow(t.deleteOne.index,t.deleteOne.row)}}},[t._v(" 删除 ")])],1)],1)],1)],1)],1)},a=[],o=n("1da1"),r=(n("a434"),n("4de4"),n("99af"),n("caad"),n("2532"),n("96cf"),{name:"SolrArticle",data:function(){return{valid:!1,loading:!1,defaultField:"",query:"",sort:"",start:0,rows:10,checkbox1:!1,checkbox2:!1,headers:[{prop:"_id",label:"_id"},{prop:"title",label:"title"},{prop:"articleAuthor",label:"articleAuthor"},{prop:"dynasty",label:"dynasty"},{prop:"bookname",label:"bookname"},{prop:"content",label:"content"},{prop:"page",label:"page"}],articles:[],returnNumber:0,numFound:0,currentPage:1,pageSize:10,deleteOneDialog:!1,deleteOne:{index:"",row:""},deleteMutiDialog:!1,selectedArticle:[]}},methods:{submit:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.loading=!0,t.getSolrData("dms_article",t.defaultField,t.query,t.sort,t.start,t.rows).then((function(e){console.log(e),t.numFound=e.numFound,t.articles=e.results,t.returnNumber=e.results.length})),t.loading=!1;case 3:case"end":return e.stop()}}),e)})))()},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.currentPage=t},deleteOneDialogShow:function(t,e){this.deleteOneDialog=!0,this.deleteOne.index=t,this.deleteOne.row=e},deleteARow:function(t,e){var n=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return console.log(t),console.log(e.id),i.next=4,n.deleteRow("dms_article",e).then((function(e){console.log(e),"success"===e&&n.articles.splice(t,1)}));case 4:case"end":return i.stop()}}),i)})))()},deleteOneMethod:function(t,e){for(var n=0;n<e.length;n++)t.splice(t.indexOf(e[n]),1);this.articles=t},deleteSelected:function(){for(var t=this,e=[],n=0;n<this.selectedArticle.length;n++)e.push(this.selectedArticle[n]._id);this.$confirm("此操作将永久删除这"+e.length+"个文章, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.deleteMany("dms_article",e).then((function(e){console.log(e),"success"===e&&t.deleteOneMethod(t.articles,t.selectedArticle)}))})).catch((function(e){console.log(e),t.$message({type:"info",message:"已取消删除"})}))},handleSelectionChange:function(t){this.selectedArticle=t,console.log(this.selectedArticle)},check:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,i,a,o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=[],i=[],e.next=4,t.getSolrData("dms_article","","","","","","_id").then((function(t){for(var e=0;e<t.results.length;e++)n.push(t.results[e]._id)}));case 4:return e.next=6,t.findAll_id("article").then((function(t){i=t}));case 6:if(console.log("solr",n),console.log("mongo",i),a=n.concat(i).filter((function(t){return n.includes(t)&&!i.includes(t)})),console.log("difference",a),o="",0!==a.length)for(r=0;r<a.length;r++)o+=a[r]+" ";else o="default";return e.next=14,t.getSolrData("dms_article","_id",o,"","","","").then((function(e){console.log(e),t.numFound=e.numFound,t.articles=e.results,t.returnNumber=e.results.length}));case 14:case"end":return e.stop()}}),e)})))()}}}),s=r,c=n("2877"),l=n("6544"),u=n.n(l),d=n("8336"),h=n("b0af"),v=n("99d9"),f=n("62ad"),m=n("a523"),g=n("5530"),p=n("2909"),b=n("ade3"),x=(n("a9e3"),n("498a"),n("7db0"),n("368e"),n("480e")),y=n("4ad4"),A=n("b848"),O=n("75eb"),w=n("e707"),k=n("e4d3"),_=n("21be"),$=n("f2e7"),C=n("a293"),j=n("58df"),E=n("d9bd"),D=n("80d2"),S=Object(j["a"])(y["a"],A["a"],O["a"],w["a"],k["a"],_["a"],$["a"]),N=S.extend({name:"v-dialog",directives:{ClickOutside:C["a"]},props:{dark:Boolean,disabled:Boolean,fullscreen:Boolean,light:Boolean,maxWidth:{type:[String,Number],default:"none"},noClickAnimation:Boolean,origin:{type:String,default:"center center"},persistent:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,transition:{type:[String,Boolean],default:"dialog-transition"},width:{type:[String,Number],default:"auto"}},data:function(){return{activatedBy:null,animate:!1,animateTimeout:-1,isActive:!!this.value,stackMinZIndex:200,previousActiveElement:null}},computed:{classes:function(){var t;return t={},Object(b["a"])(t,"v-dialog ".concat(this.contentClass).trim(),!0),Object(b["a"])(t,"v-dialog--active",this.isActive),Object(b["a"])(t,"v-dialog--persistent",this.persistent),Object(b["a"])(t,"v-dialog--fullscreen",this.fullscreen),Object(b["a"])(t,"v-dialog--scrollable",this.scrollable),Object(b["a"])(t,"v-dialog--animated",this.animate),t},contentClasses:function(){return{"v-dialog__content":!0,"v-dialog__content--active":this.isActive}},hasActivator:function(){return Boolean(!!this.$slots.activator||!!this.$scopedSlots.activator)}},watch:{isActive:function(t){var e;t?(this.show(),this.hideScroll()):(this.removeOverlay(),this.unbind(),null==(e=this.previousActiveElement)||e.focus())},fullscreen:function(t){this.isActive&&(t?(this.hideScroll(),this.removeOverlay(!1)):(this.showScroll(),this.genOverlay()))}},created:function(){this.$attrs.hasOwnProperty("full-width")&&Object(E["e"])("full-width",this)},beforeMount:function(){var t=this;this.$nextTick((function(){t.isBooted=t.isActive,t.isActive&&t.show()}))},beforeDestroy:function(){"undefined"!==typeof window&&this.unbind()},methods:{animateClick:function(){var t=this;this.animate=!1,this.$nextTick((function(){t.animate=!0,window.clearTimeout(t.animateTimeout),t.animateTimeout=window.setTimeout((function(){return t.animate=!1}),150)}))},closeConditional:function(t){var e=t.target;return!(this._isDestroyed||!this.isActive||this.$refs.content.contains(e)||this.overlay&&e&&!this.overlay.$el.contains(e))&&this.activeZIndex>=this.getMaxZIndex()},hideScroll:function(){this.fullscreen?document.documentElement.classList.add("overflow-y-hidden"):w["a"].options.methods.hideScroll.call(this)},show:function(){var t=this;!this.fullscreen&&!this.hideOverlay&&this.genOverlay(),this.$nextTick((function(){t.$nextTick((function(){t.previousActiveElement=document.activeElement,t.$refs.content.focus(),t.bind()}))}))},bind:function(){window.addEventListener("focusin",this.onFocusin)},unbind:function(){window.removeEventListener("focusin",this.onFocusin)},onClickOutside:function(t){this.$emit("click:outside",t),this.persistent?this.noClickAnimation||this.animateClick():this.isActive=!1},onKeydown:function(t){if(t.keyCode===D["r"].esc&&!this.getOpenDependents().length)if(this.persistent)this.noClickAnimation||this.animateClick();else{this.isActive=!1;var e=this.getActivator();this.$nextTick((function(){return e&&e.focus()}))}this.$emit("keydown",t)},onFocusin:function(t){if(t&&this.retainFocus){var e=t.target;if(e&&![document,this.$refs.content].includes(e)&&!this.$refs.content.contains(e)&&this.activeZIndex>=this.getMaxZIndex()&&!this.getOpenDependentElements().some((function(t){return t.contains(e)}))){var n=this.$refs.content.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),i=Object(p["a"])(n).find((function(t){return!t.hasAttribute("disabled")}));i&&i.focus()}}},genContent:function(){var t=this;return this.showLazyContent((function(){return[t.$createElement(x["a"],{props:{root:!0,light:t.light,dark:t.dark}},[t.$createElement("div",{class:t.contentClasses,attrs:Object(g["a"])({role:"document",tabindex:t.isActive?0:void 0},t.getScopeIdAttrs()),on:{keydown:t.onKeydown},style:{zIndex:t.activeZIndex},ref:"content"},[t.genTransition()])])]}))},genTransition:function(){var t=this.genInnerContent();return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,appear:!0}},[t]):t},genInnerContent:function(){var t={class:this.classes,ref:"dialog",directives:[{name:"click-outside",value:{handler:this.onClickOutside,closeConditional:this.closeConditional,include:this.getOpenDependentElements}},{name:"show",value:this.isActive}],style:{transformOrigin:this.origin}};return this.fullscreen||(t.style=Object(g["a"])(Object(g["a"])({},t.style),{},{maxWidth:"none"===this.maxWidth?void 0:Object(D["f"])(this.maxWidth),width:"auto"===this.width?void 0:Object(D["f"])(this.width)})),this.$createElement("div",t,this.getContentSlot())}},render:function(t){return t("div",{staticClass:"v-dialog__container",class:{"v-dialog__container--attached":""===this.attach||!0===this.attach||"attach"===this.attach},attrs:{role:"dialog"}},[this.genActivator(),this.genContent()])}}),T=n("4bd4"),B=n("0fd9"),I=n("2fa4"),V=n("8654"),F=Object(c["a"])(s,i,a,!1,null,"b1e9d914",null);e["default"]=F.exports;u()(F,{VBtn:d["a"],VCard:h["a"],VCardActions:v["a"],VCardText:v["b"],VCardTitle:v["c"],VCol:f["a"],VContainer:m["a"],VDialog:N,VForm:T["a"],VRow:B["a"],VSpacer:I["a"],VTextField:V["a"]})},e4d3:function(t,e,n){"use strict";var i=n("2b0e");e["a"]=i["default"].extend({name:"returnable",props:{returnValue:null},data:function(){return{isActive:!1,originalValue:null}},watch:{isActive:function(t){t?this.originalValue=this.returnValue:this.$emit("update:return-value",this.originalValue)}},methods:{save:function(t){var e=this;this.originalValue=t,setTimeout((function(){e.isActive=!1}))}}})}}]);
//# sourceMappingURL=chunk-55437c5f.6ab27910.js.map