(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f562881"],{"169a":function(e,t,n){"use strict";var i=n("5530"),a=n("2909"),r=n("ade3"),o=(n("a9e3"),n("498a"),n("caad"),n("2532"),n("7db0"),n("368e"),n("480e")),s=n("4ad4"),c=n("b848"),l=n("75eb"),u=n("e707"),d=n("e4d3"),h=n("21be"),f=n("f2e7"),v=n("a293"),g=n("58df"),p=n("d9bd"),m=n("80d2"),b=Object(g["a"])(s["a"],c["a"],l["a"],u["a"],d["a"],h["a"],f["a"]);t["a"]=b.extend({name:"v-dialog",directives:{ClickOutside:v["a"]},props:{dark:Boolean,disabled:Boolean,fullscreen:Boolean,light:Boolean,maxWidth:{type:[String,Number],default:"none"},noClickAnimation:Boolean,origin:{type:String,default:"center center"},persistent:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,transition:{type:[String,Boolean],default:"dialog-transition"},width:{type:[String,Number],default:"auto"}},data:function(){return{activatedBy:null,animate:!1,animateTimeout:-1,isActive:!!this.value,stackMinZIndex:200,previousActiveElement:null}},computed:{classes:function(){var e;return e={},Object(r["a"])(e,"v-dialog ".concat(this.contentClass).trim(),!0),Object(r["a"])(e,"v-dialog--active",this.isActive),Object(r["a"])(e,"v-dialog--persistent",this.persistent),Object(r["a"])(e,"v-dialog--fullscreen",this.fullscreen),Object(r["a"])(e,"v-dialog--scrollable",this.scrollable),Object(r["a"])(e,"v-dialog--animated",this.animate),e},contentClasses:function(){return{"v-dialog__content":!0,"v-dialog__content--active":this.isActive}},hasActivator:function(){return Boolean(!!this.$slots.activator||!!this.$scopedSlots.activator)}},watch:{isActive:function(e){var t;e?(this.show(),this.hideScroll()):(this.removeOverlay(),this.unbind(),null==(t=this.previousActiveElement)||t.focus())},fullscreen:function(e){this.isActive&&(e?(this.hideScroll(),this.removeOverlay(!1)):(this.showScroll(),this.genOverlay()))}},created:function(){this.$attrs.hasOwnProperty("full-width")&&Object(p["e"])("full-width",this)},beforeMount:function(){var e=this;this.$nextTick((function(){e.isBooted=e.isActive,e.isActive&&e.show()}))},beforeDestroy:function(){"undefined"!==typeof window&&this.unbind()},methods:{animateClick:function(){var e=this;this.animate=!1,this.$nextTick((function(){e.animate=!0,window.clearTimeout(e.animateTimeout),e.animateTimeout=window.setTimeout((function(){return e.animate=!1}),150)}))},closeConditional:function(e){var t=e.target;return!(this._isDestroyed||!this.isActive||this.$refs.content.contains(t)||this.overlay&&t&&!this.overlay.$el.contains(t))&&this.activeZIndex>=this.getMaxZIndex()},hideScroll:function(){this.fullscreen?document.documentElement.classList.add("overflow-y-hidden"):u["a"].options.methods.hideScroll.call(this)},show:function(){var e=this;!this.fullscreen&&!this.hideOverlay&&this.genOverlay(),this.$nextTick((function(){e.$nextTick((function(){e.previousActiveElement=document.activeElement,e.$refs.content.focus(),e.bind()}))}))},bind:function(){window.addEventListener("focusin",this.onFocusin)},unbind:function(){window.removeEventListener("focusin",this.onFocusin)},onClickOutside:function(e){this.$emit("click:outside",e),this.persistent?this.noClickAnimation||this.animateClick():this.isActive=!1},onKeydown:function(e){if(e.keyCode===m["r"].esc&&!this.getOpenDependents().length)if(this.persistent)this.noClickAnimation||this.animateClick();else{this.isActive=!1;var t=this.getActivator();this.$nextTick((function(){return t&&t.focus()}))}this.$emit("keydown",e)},onFocusin:function(e){if(e&&this.retainFocus){var t=e.target;if(t&&![document,this.$refs.content].includes(t)&&!this.$refs.content.contains(t)&&this.activeZIndex>=this.getMaxZIndex()&&!this.getOpenDependentElements().some((function(e){return e.contains(t)}))){var n=this.$refs.content.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),i=Object(a["a"])(n).find((function(e){return!e.hasAttribute("disabled")}));i&&i.focus()}}},genContent:function(){var e=this;return this.showLazyContent((function(){return[e.$createElement(o["a"],{props:{root:!0,light:e.light,dark:e.dark}},[e.$createElement("div",{class:e.contentClasses,attrs:Object(i["a"])({role:"document",tabindex:e.isActive?0:void 0},e.getScopeIdAttrs()),on:{keydown:e.onKeydown},style:{zIndex:e.activeZIndex},ref:"content"},[e.genTransition()])])]}))},genTransition:function(){var e=this.genInnerContent();return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,appear:!0}},[e]):e},genInnerContent:function(){var e={class:this.classes,ref:"dialog",directives:[{name:"click-outside",value:{handler:this.onClickOutside,closeConditional:this.closeConditional,include:this.getOpenDependentElements}},{name:"show",value:this.isActive}],style:{transformOrigin:this.origin}};return this.fullscreen||(e.style=Object(i["a"])(Object(i["a"])({},e.style),{},{maxWidth:"none"===this.maxWidth?void 0:Object(m["f"])(this.maxWidth),width:"auto"===this.width?void 0:Object(m["f"])(this.width)})),this.$createElement("div",e,this.getContentSlot())}},render:function(e){return e("div",{staticClass:"v-dialog__container",class:{"v-dialog__container--attached":""===this.attach||!0===this.attach||"attach"===this.attach},attrs:{role:"dialog"}},[this.genActivator(),this.genContent()])}})},"368e":function(e,t,n){},"4bd4":function(e,t,n){"use strict";var i=n("5530"),a=(n("caad"),n("2532"),n("07ac"),n("4de4"),n("159b"),n("7db0"),n("58df")),r=n("7e2b"),o=n("3206");t["a"]=Object(a["a"])(r["a"],Object(o["b"])("form")).extend({name:"v-form",provide:function(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(e){var t=Object.values(e).includes(!0);this.$emit("input",!t)},deep:!0,immediate:!0}},methods:{watchInput:function(e){var t=this,n=function(e){return e.$watch("hasError",(function(n){t.$set(t.errorBag,e._uid,n)}),{immediate:!0})},i={_uid:e._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?i.shouldValidate=e.$watch("shouldValidate",(function(a){a&&(t.errorBag.hasOwnProperty(e._uid)||(i.valid=n(e)))})):i.valid=n(e),i},validate:function(){return 0===this.inputs.filter((function(e){return!e.validate(!0)})).length},reset:function(){this.inputs.forEach((function(e){return e.reset()})),this.resetErrorBag()},resetErrorBag:function(){var e=this;this.lazyValidation&&setTimeout((function(){e.errorBag={}}),0)},resetValidation:function(){this.inputs.forEach((function(e){return e.resetValidation()})),this.resetErrorBag()},register:function(e){this.inputs.push(e),this.watchers.push(this.watchInput(e))},unregister:function(e){var t=this.inputs.find((function(t){return t._uid===e._uid}));if(t){var n=this.watchers.find((function(e){return e._uid===t._uid}));n&&(n.valid(),n.shouldValidate()),this.watchers=this.watchers.filter((function(e){return e._uid!==t._uid})),this.inputs=this.inputs.filter((function(e){return e._uid!==t._uid})),this.$delete(this.errorBag,t._uid)}}},render:function(e){var t=this;return e("form",{staticClass:"v-form",attrs:Object(i["a"])({novalidate:!0},this.attrs$),on:{submit:function(e){return t.$emit("submit",e)}}},this.$slots.default)}})},"99d9":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c}));var i=n("b0af"),a=n("80d2"),r=Object(a["g"])("v-card__actions"),o=Object(a["g"])("v-card__subtitle"),s=Object(a["g"])("v-card__text"),c=Object(a["g"])("v-card__title");i["a"]},b1be:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-row",[n("v-col",{attrs:{cols:2}},[n("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-select",{attrs:{items:e.fields,label:"查询字段"},model:{value:e.select,callback:function(t){e.select=t},expression:"select"}}),n("v-text-field",{attrs:{label:"查询内容"},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}}),n("v-col",[n("v-btn",{staticClass:"mr-4",attrs:{color:"primary"},on:{click:e.submit}},[e._v(" Execute Query ")])],1),n("v-col",[n("v-btn",{staticClass:"mr-4",attrs:{color:"primary"},on:{click:e.findAll_}},[e._v(" Find All ")])],1),n("v-col",[n("v-btn",{staticClass:"mr-4",attrs:{color:"primary"},on:{click:function(t){return e.check()}}},[e._v(" check ")])],1)],1)],1),n("v-col",{attrs:{cols:10}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",attrs:{data:e.articles.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize)},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),e._l(e.headers,(function(e){return n("el-table-column",{key:e.label,attrs:{prop:e.prop,label:e.label,"show-overflow-tooltip":!0}})})),n("el-table-column",{attrs:{label:"选项"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return e.deleteOneDialogShow(t.$index,t.row)}}},[e._v("删除")])]}}])})],2),0!==e.articles.length?n("v-row",{staticStyle:{"margin-top":"20px"},attrs:{justify:"center"}},[n("v-col",[n("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.deleteSelected()}}},[e._v("删除选中")])],1),n("v-col",[n("el-pagination",{attrs:{align:"center","current-page":e.currentPage,"page-size":10,layout:"total, prev, pager, next, jumper",total:e.returnNumber},on:{"current-change":e.handleCurrentChange}})],1)],1):e._e()],1)],1),n("v-row",{attrs:{justify:"center"}},[n("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:e.deleteOneDialog,callback:function(t){e.deleteOneDialog=t},expression:"deleteOneDialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v(" 删除确认 ")]),n("v-card-text",[e._v("您确认要删除_id为"+e._s(e.deleteOne.row._id)+"的文章吗？")]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary",text:""},on:{click:function(t){e.deleteOneDialog=!1}}},[e._v(" 取消 ")]),n("v-btn",{attrs:{color:"red",text:""},on:{click:function(t){e.deleteOneDialog=!1,e.deleteARow(e.deleteOne.index,e.deleteOne.row)}}},[e._v(" 删除 ")])],1)],1)],1)],1)],1)},a=[],r=n("1da1"),o=(n("96cf"),n("7db0"),n("a434"),n("4de4"),n("99af"),n("caad"),n("2532"),{name:"DmsArticle",data:function(){return{valid:!1,loading:!1,select:"",fields:["_id","title","articleAuthor","bookname","dynasty","content"],query:"",headers:[{prop:"_id",label:"_id"},{prop:"title",label:"title"},{prop:"articleAuthor",label:"articleAuthor"},{prop:"dynasty",label:"dynasty"},{prop:"bookname",label:"bookname"},{prop:"content",label:"content"},{prop:"page",label:"page"}],articles:[],returnNumber:0,numFound:0,currentPage:1,pageSize:10,selectedArticle:[],deleteOneDialog:!1,deleteOne:{index:"",row:""}}},methods:{submit:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.find("article",e.select,e.query).then((function(t){e.articles=t;for(var n=0;n<t.length;n++)e.articles[n].page=JSON.stringify(t[n].page);e.numFound=t.length,e.returnNumber=t.length}));case 2:case"end":return t.stop()}}),t)})))()},findAll_:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.findAll("article").then((function(t){console.log(t),e.articles=t;for(var n=0;n<t.length;n++)e.articles[n].page=JSON.stringify(t[n].page);e.numFound=t.length,e.returnNumber=t.length}));case 3:e.loading=!1;case 4:case"end":return t.stop()}}),t)})))()},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.currentPage=e},deleteOneDialogShow:function(e,t){this.deleteOneDialog=!0,this.deleteOne.index=e,this.deleteOne.row=t},deleteARow:function(e,t){var n=this;return Object(r["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return console.log(e),console.log(t._id),i.next=4,n.deleteRowMongo("article",t).then((function(t){console.log(t),"success"===t&&n.articles.splice(e,1)}));case 4:case"end":return i.stop()}}),i)})))()},handleSelectionChange:function(e){this.selectedArticle=e,console.log(this.selectedArticle)},deleteOneMethod:function(e,t){for(var n=0;n<t.length;n++)e.splice(e.indexOf(t[n]),1);this.articles=e},deleteSelected:function(){for(var e=this,t=JSON.parse(JSON.stringify(this.selectedArticle)),n=0;n<t.length;n++)t[n].page=JSON.parse(t[n].page);this.$confirm("此操作将永久删除这"+t.length+"个文章, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.deleteManyMongo("article",t).then((function(t){console.log(t),"success"===t&&e.deleteOneMethod(e.articles,e.selectedArticle)}))})).catch((function(t){console.log(t),e.$message({type:"info",message:"已取消删除"})}))},check:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=[],i=[],t.next=4,e.findAll_id("article").then((function(e){n=e}));case 4:return t.next=6,e.getSolrData("dms_article","","","","","","_id").then((function(e){for(var t=0;t<e.results.length;t++)i.push(e.results[t]._id)}));case 6:return console.log("mongo",n),console.log("solr",i),a=n.concat(i).filter((function(e){return n.includes(e)&&!i.includes(e)})),console.log("difference",a),t.next=12,e.findMany("article","_id",a).then((function(t){console.log(t),e.articles=t;for(var n=0;n<t.length;n++)e.articles[n].page=JSON.stringify(t[n].page);e.numFound=t.length,e.returnNumber=t.length}));case 12:case"end":return t.stop()}}),t)})))()}}}),s=o,c=n("2877"),l=n("6544"),u=n.n(l),d=n("8336"),h=n("b0af"),f=n("99d9"),v=n("62ad"),g=n("a523"),p=n("169a"),m=n("4bd4"),b=n("0fd9"),w=n("b974"),y=n("2fa4"),O=n("8654"),x=Object(c["a"])(s,i,a,!1,null,"009cd674",null);t["default"]=x.exports;u()(x,{VBtn:d["a"],VCard:h["a"],VCardActions:f["a"],VCardText:f["b"],VCardTitle:f["c"],VCol:v["a"],VContainer:g["a"],VDialog:p["a"],VForm:m["a"],VRow:b["a"],VSelect:w["a"],VSpacer:y["a"],VTextField:O["a"]})}}]);
//# sourceMappingURL=chunk-1f562881.1eebd955.js.map